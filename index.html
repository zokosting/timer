<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>¡Hola, Ángel!</title>
  <style>
    :root{--bar-bg:#ddd;--bar-fill:#007bff;--fg:#000;--muted:#777}
    html,body{height:100%;width:100%;margin:0;padding:0;color:var(--fg);font-family:system-ui,Segoe UI,Roboto,sans-serif;display:flex;align-items:center;justify-content:center}
    .grid{display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:auto auto auto;row-gap:20px;width:100%;height:95%;gap:0}
    .cell{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:10px;box-sizing:border-box}
    .single-cell{grid-column:1/3;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:10px}
    .label{font-size:22px;font-weight:700;text-transform:capitalize}
    .bar{width:90%;height:36px;background:var(--bar-bg);border-radius:999px;overflow:hidden}
    .fill{height:100%;width:0%;background:linear-gradient(90deg,var(--bar-fill),#33a0ff);border-radius:999px;transition:width .3s linear}
    .value{font-size:16px;font-style:italic;color:var(--muted)}
    @media (prefers-reduced-motion:reduce){.fill{transition:none}}
  </style>
</head>
<body>
  <div class="grid">
    <!-- Fila 1: Año y Mes -->
    <div class="cell"><div class="label" id="yearLabel"></div><div class="bar"><div class="fill" id="yearFill"></div></div><div class="value" id="yearPct">0%</div></div>
    <div class="cell"><div class="label" id="monthLabel"></div><div class="bar"><div class="fill" id="monthFill"></div></div><div class="value" id="monthPct">0%</div></div>
    <!-- Fila 2: 4000 semanas centrada -->
    <div class="single-cell"><div class="label" id="lifeLabel">4000 semanas</div><div class="bar"><div class="fill" id="lifeFill"></div></div><div class="value" id="lifePct">0%</div></div>
    <!-- Fila 3: Día del mes y Semana actual -->
    <div class="cell"><div class="label" id="dayLabel"></div><div class="bar"><div class="fill" id="dayFill"></div></div><div class="value" id="dayPct">0%</div></div>
    <div class="cell"><div class="label" id="weekLabel"></div><div class="bar"><div class="fill" id="weekFill"></div></div><div class="value" id="weekPct">0%</div></div>
  </div>

  <script>
    (function(){
      const el={
        yearLabel,monthLabel,dayLabel,weekLabel,lifeLabel,
        yearFill,monthFill,dayFill,weekFill,lifeFill,
        yearPct,monthPct,dayPct,weekPct,lifePct
      };

      const birth=new Date('1980-09-11T00:00:00Z').getTime();
      const endLife=birth+4000*7*24*60*60*1000;

      function pct(s,e,n){return Math.max(0,Math.min(1,(n-s)/(e-s)))}
      function sDay(d){return new Date(d.getFullYear(),d.getMonth(),d.getDate())}
      function sMonth(d){return new Date(d.getFullYear(),d.getMonth(),1)}
      function sNextMonth(d){return new Date(d.getFullYear(),d.getMonth()+1,1)}
      function sYear(d){return new Date(d.getFullYear(),0,1)}
      function sNextYear(d){return new Date(d.getFullYear()+1,0,1)}
      function fmt(n){return(n*100).toFixed(2)+'%'}

      function tick(){
        const n=new Date(),ms=n.getTime();

        // Etiquetas dinámicas
        el.yearLabel.textContent=n.getFullYear();
        el.monthLabel.textContent=n.toLocaleDateString('es-ES',{month:'long'});
        el.dayLabel.textContent=n.getDate();
        const dayOfWeek=n.toLocaleDateString('es-ES',{weekday:'long'});
        el.weekLabel.textContent=dayOfWeek;

        // Barra semana actual
        const startWeek=new Date(n);
        startWeek.setDate(n.getDate() - n.getDay());
        const endWeek=new Date(startWeek); endWeek.setDate(startWeek.getDate()+7);
        const pw=pct(startWeek.getTime(),endWeek.getTime(),ms);

        // Barra 4000 semanas
        const pl=pct(birth,endLife,ms);

        // Barra año, mes, día
        const py=pct(sYear(n).getTime(),sNextYear(n).getTime(),ms);
        const pm=pct(sMonth(n).getTime(),sNextMonth(n).getTime(),ms);
        const pd=pct(sDay(n).getTime(),sDay(n).getTime()+86400000,ms);

        // Actualizar estilos
        el.yearFill.style.width=(py*100).toFixed(2)+'%';
        el.monthFill.style.width=(pm*100).toFixed(2)+'%';
        el.dayFill.style.width=(pd*100).toFixed(2)+'%';
        el.weekFill.style.width=(pw*100).toFixed(2)+'%';
        el.lifeFill.style.width=(pl*100).toFixed(2)+'%';

        el.yearPct.textContent=fmt(py);
        el.monthPct.textContent=fmt(pm);
        el.dayPct.textContent=fmt(pd);
        el.weekPct.textContent=fmt(pw);
        el.lifePct.textContent=fmt(pl);

        setTimeout(tick,1000-n.getMilliseconds());
      }
      tick();
    })();
  </script>
</body>
</html>
